<template>
  <div class="best-practices-demo">
    <div class="demo-header">
      <span class="icon">âœ…</span>
      <span class="title">æƒé™ç®¡ç†æœ€ä½³å®è·µ</span>
      <span class="subtitle">æŒ‰ä¼˜å…ˆçº§å®æ–½å®‰å…¨æªæ–½</span>
    </div>

    <div class="practices-list">
      <div
        v-for="(practice, index) in bestPractices"
        :key="index"
        class="practice-item"
        :class="{ active: expandedCard === index }"
        @click="toggleCard(index)"
      >
        <div class="item-header">
          <span class="item-icon">{{ practice.icon }}</span>
          <span class="item-title">{{ practice.title }}</span>
          <span class="item-priority" :class="practice.priority">{{ practice.priorityText }}</span>
        </div>
        <div class="item-body" v-if="expandedCard === index">
          <p class="item-desc">{{ practice.description }}</p>
          <div class="item-checks">
            <span v-for="(item, i) in practice.checklist.slice(0, 3)" :key="i" class="check-tag">âœ“ {{ item }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="info-box">
      <span class="icon">ğŸ’¡</span>
      <strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong>æŒ‰ç…§ä¼˜å…ˆçº§ä» P0 å¼€å§‹é€æ­¥å®æ–½ã€‚æ¯ä¸ªæ”¹è¿›éƒ½èƒ½æ˜¾è‘—æå‡è´¦å·å®‰å…¨æ€§ã€‚
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const expandedCard = ref(0)

const bestPractices = [
  {
    icon: 'ğŸ‘‘',
    title: 'æ ¹è´¦å·ä¿æŠ¤',
    priority: 'p0',
    priorityText: 'P0',
    description: 'æ ¹è´¦å·æ˜¯äº‘æœåŠ¡çš„æ‰€æœ‰è€…ï¼Œå¿…é¡»å®æ–½æœ€é«˜çº§åˆ«çš„ä¿æŠ¤ã€‚',
    checklist: ['å¯ç”¨ MFA', 'åˆ›å»º IAM ç®¡ç†å‘˜ç”¨æˆ·', 'åˆ é™¤æ ¹è´¦å·è®¿é—®å¯†é’¥']
  },
  {
    icon: 'ğŸ‘¤',
    title: 'ç”¨æˆ·æƒé™æœ€å°åŒ–',
    priority: 'p0',
    priorityText: 'P0',
    description: 'éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œåªæˆäºˆç”¨æˆ·å®Œæˆå·¥ä½œæ‰€éœ€çš„æœ€ä½æƒé™ã€‚',
    checklist: ['é¿å…å…¨æƒé™ç­–ç•¥', 'ä½¿ç”¨ç”¨æˆ·ç»„ç®¡ç†', 'å®šæœŸå®¡æŸ¥ç”¨æˆ·']
  },
  {
    icon: 'ğŸ­',
    title: 'ä¼˜å…ˆä½¿ç”¨ IAM è§’è‰²',
    priority: 'p1',
    priorityText: 'P1',
    description: 'IAM è§’è‰²æ²¡æœ‰é•¿æœŸå‡­è¯ï¼Œé€šè¿‡ä¸´æ—¶å‡­è¯è®¿é—®ï¼Œé™ä½æ³„éœ²é£é™©ã€‚',
    checklist: ['EC2 ä½¿ç”¨å®ä¾‹è§’è‰²', 'Lambda ä½¿ç”¨æ‰§è¡Œè§’è‰²', 'è·¨è´¦å·ç”¨ AssumeRole']
  },
  {
    icon: 'ğŸ”‘',
    title: 'è®¿é—®å¯†é’¥å®‰å…¨ç®¡ç†',
    priority: 'p1',
    priorityText: 'P1',
    description: 'å¦‚æœå¿…é¡»ä½¿ç”¨ AK/SKï¼Œéœ€è¦å®æ–½ä¸¥æ ¼çš„å®‰å…¨ç®¡ç†æªæ–½ã€‚',
    checklist: ['ä¸ç¡¬ç¼–ç å‡­è¯', 'ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡', 'å®šæœŸè½®æ¢å¯†é’¥']
  },
  {
    icon: 'ğŸ“Š',
    title: 'ç›‘æ§ä¸å®¡è®¡',
    priority: 'p2',
    priorityText: 'P2',
    description: 'å»ºç«‹å…¨é¢çš„ç›‘æ§å’Œå®¡è®¡æœºåˆ¶ï¼ŒåŠæ—¶å‘ç°å®‰å…¨äº‹ä»¶ã€‚',
    checklist: ['å¯ç”¨ CloudTrail', 'é…ç½®å…³é”®æ“ä½œå‘Šè­¦', 'å®šæœŸå®¡æŸ¥æƒé™']
  }
]

function toggleCard(index) {
  expandedCard.value = expandedCard.value === index ? null : index
}
</script>

<style scoped>
.best-practices-demo {
  border: 1px solid var(--vp-c-divider);
  background: var(--vp-c-bg-soft);
  border-radius: 6px;
  padding: 0.75rem;
  margin: 0.5rem 0;
}

.demo-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.demo-header .icon { font-size: 1.25rem; }
.demo-header .title { font-weight: bold; font-size: 1rem; }
.demo-header .subtitle { color: var(--vp-c-text-2); font-size: 0.85rem; margin-left: 0.5rem; }

.practices-list {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  margin-bottom: 0.75rem;
}

.practice-item {
  background: var(--vp-c-bg);
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.practice-item:hover { border-color: var(--vp-c-brand); }
.practice-item.active {
  border-color: var(--vp-c-brand);
  background: var(--vp-c-bg-alt);
}

.item-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem;
}

.item-icon { font-size: 1rem; }
.item-title { font-weight: 600; font-size: 0.85rem; flex: 1; }

.item-priority {
  font-size: 0.65rem;
  font-weight: 700;
  padding: 0.15rem 0.4rem;
  border-radius: 3px;
}

.item-priority.p0 { background: var(--vp-c-danger); color: #fff; }
.item-priority.p1 { background: var(--vp-c-warning); color: #fff; }
.item-priority.p2 { background: var(--vp-c-brand-soft); color: var(--vp-c-brand-1); }

.item-body {
  padding: 0 0.6rem 0.6rem;
  border-top: 1px solid var(--vp-c-divider);
  margin-top: 0;
  padding-top: 0.5rem;
}

.item-desc {
  font-size: 0.8rem;
  color: var(--vp-c-text-2);
  margin: 0 0 0.5rem;
  line-height: 1.4;
}

.item-checks {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
}

.check-tag {
  font-size: 0.7rem;
  padding: 0.15rem 0.4rem;
  background: var(--vp-c-brand-soft);
  color: var(--vp-c-brand-1);
  border-radius: 3px;
}

.info-box {
  background: var(--vp-c-bg-alt);
  padding: 0.6rem;
  border-radius: 6px;
  font-size: 0.85rem;
  color: var(--vp-c-text-2);
  display: flex;
  gap: 0.25rem;
}

.info-box .icon { flex-shrink: 0; }
.info-box strong { color: var(--vp-c-text-1); }
</style>
