<!--
  FunctionApiDemo.vue - ç´§å‡‘ç‰ˆ
  ç›®æ ‡ï¼šå±•ç¤ºå‡½æ•°å°±æ˜¯æœ€åŸºç¡€çš„ API
-->
<template>
  <div class="demo-root">
    <div class="demo-header">
      <span class="icon">ğŸ”§</span>
      <span class="title">å‡½æ•°å°±æ˜¯æœ€åŸºç¡€çš„ API</span>
    </div>

    <div class="demo-layout">
      <div class="code-panel">
        <div class="code-title">ğŸ“ Python ä»£ç </div>
        <pre><code><span class="keyword">def</span> <span class="func">greet</span>(name, greeting=<span class="str">"ä½ å¥½"</span>):
    <span class="keyword">return</span> <span class="str">f"{greeting}ï¼Œ{name}ï¼"</span>

result = <span class="func">greet</span>(<span class="str">"å¼ ä¸‰"</span>)</code></pre>
      </div>

      <div class="right-panel">
        <div class="api-structure">
          <div class="structure-item">
            <span class="label">ğŸ“¦ è¾“å…¥ï¼ˆå‚æ•°ï¼‰</span>
            <code class="value">name="å¼ ä¸‰"</code>
          </div>
          <div class="structure-item">
            <span class="label">âš™ï¸ å¤„ç†</span>
            <span class="value">å‡½æ•°å†…éƒ¨æ‹¼æ¥å­—ç¬¦ä¸²</span>
          </div>
          <div class="structure-item">
            <span class="label">ğŸ“¤ è¾“å‡ºï¼ˆè¿”å›ï¼‰</span>
            <code class="value highlight">"ä½ å¥½ï¼Œå¼ ä¸‰ï¼"</code>
          </div>
        </div>

        <div class="try-area">
          <div class="try-row">
            <input v-model="name" placeholder="åå­—" class="input" />
            <select v-model="greeting" class="select">
              <option value="ä½ å¥½">ä½ å¥½</option>
              <option value="Hello">Hello</option>
              <option value="æ—©ä¸Šå¥½">æ—©ä¸Šå¥½</option>
            </select>
            <button class="btn" @click="callFunction">è°ƒç”¨</button>
          </div>
          <div v-if="result" class="result">
            â†’ <code>{{ result }}</code>
          </div>
        </div>
      </div>
    </div>

    <div class="info-box">
      <strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong>
      <span
        >ä½ ä¸éœ€è¦çŸ¥é“å‡½æ•°å†…éƒ¨æ€ä¹ˆå®ç°ï¼Œåªéœ€è¦çŸ¥é“æ€ä¹ˆè°ƒç”¨å®ƒã€‚è¿™å°±æ˜¯ API
        çš„æœ¬è´¨ã€‚</span
      >
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const name = ref('å¼ ä¸‰')
const greeting = ref('ä½ å¥½')
const result = ref('')

function callFunction() {
  result.value = `${greeting.value}ï¼Œ${name.value}ï¼`
}
</script>

<style scoped>
.demo-root {
  border: 1px solid var(--vp-c-divider);
  border-radius: 10px;
  overflow: hidden;
  background: var(--vp-c-bg-soft);
  margin: 1rem 0;
  font-size: 0.85rem;
}

.demo-header {
  padding: 10px 16px;
  background: var(--vp-c-bg);
  border-bottom: 1px solid var(--vp-c-divider);
  display: flex;
  align-items: center;
  gap: 8px;
}

.icon {
  font-size: 18px;
}
.title {
  font-weight: 600;
  font-size: 0.9rem;
}

.demo-layout {
  display: flex;
  gap: 0;
}

.code-panel {
  flex: 1;
  background: #1e293b;
  padding: 12px 14px;
  border-right: 1px solid var(--vp-c-divider);
}

.code-title {
  color: #94a3b8;
  font-size: 0.75rem;
  margin-bottom: 8px;
}

.code-panel pre {
  margin: 0;
  font-family: 'Menlo', 'Monaco', monospace;
  font-size: 0.75rem;
  line-height: 1.6;
}

.code-panel code {
  color: #e2e8f0;
}
.keyword {
  color: #c084fc;
}
.func {
  color: #60a5fa;
}
.str {
  color: #4ade80;
}

.right-panel {
  width: 260px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: var(--vp-c-bg);
}

@media (max-width: 640px) {
  .demo-layout {
    flex-direction: column;
  }
  .code-panel {
    border-right: none;
    border-bottom: 1px solid var(--vp-c-divider);
  }
  .right-panel {
    width: 100%;
  }
}

.api-structure {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.structure-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  background: var(--vp-c-bg-soft);
  border-radius: 4px;
  font-size: 0.75rem;
}

.structure-item .label {
  color: var(--vp-c-text-2);
}

.structure-item .value {
  font-family: monospace;
  font-size: 0.72rem;
}

.structure-item .highlight {
  background: #dcfce7;
  color: #166534;
  padding: 2px 6px;
  border-radius: 3px;
}

.try-area {
  padding: 10px;
  background: var(--vp-c-bg-soft);
  border-radius: 6px;
}

.try-row {
  display: flex;
  gap: 6px;
}

.input {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  font-size: 0.8rem;
  background: var(--vp-c-bg);
}

.select {
  padding: 6px 8px;
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  font-size: 0.8rem;
  background: var(--vp-c-bg);
}

.btn {
  padding: 6px 12px;
  background: var(--vp-c-brand);
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
}

.result {
  margin-top: 8px;
  padding: 6px 8px;
  background: #dcfce7;
  border-radius: 4px;
  font-size: 0.8rem;
}

.result code {
  color: #166534;
  font-weight: 600;
}

.info-box {
  display: flex;
  gap: 0.25rem;
  padding: 10px 14px;
  background: var(--vp-c-bg-alt);
  border-top: 1px solid var(--vp-c-divider);
  font-size: 0.8rem;
  color: var(--vp-c-text-2);
}

.info-box strong {
  white-space: nowrap;
  flex-shrink: 0;
}
</style>
