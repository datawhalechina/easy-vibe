<template>
  <div class="router-architecture-demo">
    <div class="demo-header">
      <span class="icon">ğŸ—ï¸</span>
      <span class="title">è·¯ç”±æ¶æ„</span>
      <span class="subtitle">å‰ç«¯è·¯ç”±ç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†</span>
    </div>

    <div class="intro-text">
      æƒ³è±¡<span class="highlight">å…¬å¸çš„ç»„ç»‡æ¶æ„</span>ï¼šæœ‰å‰å°æ¥å¾…ï¼ˆURLç›‘å¬ï¼‰ã€æœ‰è°ƒåº¦ä¸­å¿ƒï¼ˆè·¯ç”±åŒ¹é…ï¼‰ã€æœ‰å„éƒ¨é—¨ï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰ã€‚å‰ç«¯è·¯ç”±ä¹Ÿæ˜¯è¿™æ ·åˆ†å±‚åä½œçš„ï¼Œå„å¸å…¶èŒã€‚
    </div>

    <div class="architecture-layers">
      <div class="layer" v-for="(layer, index) in layers" :key="layer.name">
        <div class="layer-header">
          <span class="layer-icon">{{ layer.icon }}</span>
          <span class="layer-name">{{ layer.name }}</span>
          <span class="layer-desc">{{ layer.desc }}</span>
        </div>
        <div class="layer-components">
          <div
            v-for="comp in layer.components"
            :key="comp"
            class="component-tag"
          >
            {{ comp }}
          </div>
        </div>
        <div v-if="index < layers.length - 1" class="layer-arrow">â†“</div>
      </div>
    </div>

    <div class="data-flow">
      <h5>ğŸ“Š æ•°æ®æµå‘</h5>
      <div class="flow-steps">
        <div class="flow-step">
          <span class="step-num">1</span>
          <span>ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œè§¦å‘ URL å˜åŒ–</span>
        </div>
        <div class="flow-step">
          <span class="step-num">2</span>
          <span>History ç›‘å¬å™¨æ•è·å˜åŒ–</span>
        </div>
        <div class="flow-step">
          <span class="step-num">3</span>
          <span>è·¯ç”±åŒ¹é…å™¨æ‰¾åˆ°å¯¹åº”é…ç½®</span>
        </div>
        <div class="flow-step">
          <span class="step-num">4</span>
          <span>æ‰§è¡Œå®ˆå«è¿›è¡ŒéªŒè¯</span>
        </div>
        <div class="flow-step">
          <span class="step-num">5</span>
          <span>æ¸²æŸ“ç»„ä»¶åˆ° RouterView</span>
        </div>
      </div>
    </div>

    <div class="info-box">
      <span class="icon">ğŸ’¡</span>
      <strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong>è·¯ç”±ç³»ç»Ÿé€šè¿‡ç›‘å¬URLå˜åŒ–ã€åŒ¹é…è·¯ç”±é…ç½®ã€æ‰§è¡Œå®ˆå«éªŒè¯ã€æ¸²æŸ“ç»„ä»¶è¿™ä¸€ç³»åˆ—æµç¨‹ï¼Œå®ç°äº†å•é¡µåº”ç”¨çš„æ— åˆ·æ–°å¯¼èˆªã€‚
    </div>
  </div>
</template>

<script setup>
const layers = [
  {
    name: 'æµè§ˆå™¨å±‚',
    icon: 'ğŸŒ',
    desc: 'æä¾› URL å’Œ History API',
    components: ['URL Bar', 'History API', 'Hash Change', 'PopState']
  },
  {
    name: 'è·¯ç”±æ ¸å¿ƒå±‚',
    icon: 'âš™ï¸',
    desc: 'è·¯ç”±ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘',
    components: ['Router å®ä¾‹', 'è·¯ç”±åŒ¹é…å™¨', 'History ç®¡ç†', 'å®ˆå«ç®¡é“']
  },
  {
    name: 'ç»„ä»¶å±‚',
    icon: 'ğŸ§©',
    desc: 'ç”¨æˆ·ç•Œé¢æ¸²æŸ“',
    components: ['RouterView', 'RouterLink', 'é¡µé¢ç»„ä»¶']
  }
]
</script>

<style scoped>
.router-architecture-demo {
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  background: var(--vp-c-bg-soft);
  padding: 0.75rem;
  margin: 0.5rem 0;
  
  
}

.demo-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.demo-header .icon { font-size: 1.25rem; }
.demo-header .title { font-weight: bold; font-size: 1rem; }
.demo-header .subtitle { color: var(--vp-c-text-2); font-size: 0.85rem; margin-left: 0.5rem; }

.intro-text {
  font-size: 0.9rem;
  color: var(--vp-c-text-2);
  line-height: 1.6;
  margin-bottom: 1rem;
  padding: 0.75rem;
  background: var(--vp-c-bg);
  border-radius: 6px;
}

.intro-text .highlight {
  color: var(--vp-c-brand-1);
  font-weight: 500;
}

.architecture-layers {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.layer {
  background: var(--vp-c-bg);
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  padding: 0.75rem;
}

.layer-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.layer-icon {
  font-size: 1rem;
}

.layer-name {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--vp-c-text-1);
}

.layer-desc {
  font-size: 0.7rem;
  color: var(--vp-c-text-3);
  margin-left: auto;
}

.layer-components {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.component-tag {
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  padding: 0.25rem 0.5rem;
  font-size: 0.7rem;
  color: var(--vp-c-text-2);
}

.layer-arrow {
  text-align: center;
  color: var(--vp-c-text-3);
  font-size: 0.75rem;
  margin-top: 0.25rem;
}

.data-flow {
  background: var(--vp-c-bg);
  border-radius: 6px;
  padding: 0.75rem;
  border: 1px solid var(--vp-c-divider);
  margin-bottom: 1rem;
}

.data-flow h5 {
  margin: 0 0 0.5rem 0;
  font-size: 0.85rem;
  color: var(--vp-c-text-2);
}

.flow-steps {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.flow-step {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--vp-c-bg-soft);
  border-radius: 6px;
  border-left: 3px solid var(--vp-c-brand);
  font-size: 0.8rem;
  color: var(--vp-c-text-2);
}

.step-num {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--vp-c-brand);
  color: white;
  border-radius: 50%;
  font-size: 0.65rem;
  font-weight: 600;
  flex-shrink: 0;
}

.info-box {
  background: var(--vp-c-bg-alt);
  padding: 0.75rem;
  border-radius: 6px;
  font-size: 0.85rem;
  color: var(--vp-c-text-2);
}

.info-box .icon { margin-right: 0.25rem; }

@media (max-width: 768px) {
  .layer-header {
    flex-wrap: wrap;
  }

  .layer-desc {
    margin-left: 0;
    width: 100%;
  }
}
</style>
